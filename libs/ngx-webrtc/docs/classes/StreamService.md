[ngx-webrtc](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/README.md) / [Exports](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/modules.md) / StreamService

# Class: StreamService

## Table of contents

### Constructors

- [constructor](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#constructor)

### Properties

- [audioOutput$](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#audiooutput$)
- [hasAudio](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#hasaudio)
- [hasVideo](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#hasvideo)
- [localAudioStreamStatusChanged](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#localaudiostreamstatuschanged)
- [localShareScreenStream$](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#localsharescreenstream$)
- [localStream$](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#localstream$)
- [localStreamStatusChanged](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#localstreamstatuschanged)
- [localVideoStreamStatusChanged](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#localvideostreamstatuschanged)
- [replaceTrack$](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#replacetrack$)

### Methods

- [disableLocalTrack](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#disablelocaltrack)
- [enableLocalTrack](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#enablelocaltrack)
- [getAudioTrackForStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#getaudiotrackforstream)
- [getLocalStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#getlocalstream)
- [getMediaDevices](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#getmediadevices)
- [getScreenCapture](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#getscreencapture)
- [getVideoTrackForStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#getvideotrackforstream)
- [muteLocalAudioStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#mutelocalaudiostream)
- [muteLocalVideoStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#mutelocalvideostream)
- [muteStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#mutestream)
- [replaceTrack](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#replacetrack)
- [replaceTrackInStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#replacetrackinstream)
- [setAudioOutput](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#setaudiooutput)
- [setLocalStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#setlocalstream)
- [setStreamInNode](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#setstreaminnode)
- [stopStreamInNode](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#stopstreaminnode)
- [toggleLocalTrack](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#togglelocaltrack)
- [toggleMuteLocalAudioStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#togglemutelocalaudiostream)
- [toggleMuteLocalVideoStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#togglemutelocalvideostream)
- [toggleMuteStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#togglemutestream)
- [tryGetUserMedia](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#trygetusermedia)
- [unmuteLocalAudioStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#unmutelocalaudiostream)
- [unmuteLocalVideoStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#unmutelocalvideostream)
- [unmuteStream](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#unmutestream)
- [getAspectRatio](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/StreamService.md#getaspectratio)

## Constructors

### constructor

• **new StreamService**(`config`, `preferencesService`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `config` | [`Configuration`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/Configuration.md) |
| `preferencesService` | [`PreferencesService`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/classes/PreferencesService.md) |

#### Defined in

[lib/services/stream.service.ts:58](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L58)

## Properties

### audioOutput$

• **audioOutput$**: `BehaviorSubject`<``null`` \| `string`\>

Emitted when `StreamService.setAudioOutput` is called with new device (Call it when the switch the audio device).

#### Defined in

[lib/services/stream.service.ts:29](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L29)

___

### hasAudio

• **hasAudio**: `boolean` = `false`

Set to `true` when the StreamService.tryGetUserMedia is succefull for audio (microphone).

**`deprecated`**

#### Defined in

[lib/services/stream.service.ts:56](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L56)

___

### hasVideo

• **hasVideo**: `boolean` = `false`

Set to `true` when the StreamService.tryGetUserMedia is succefull for video (camera).

**`deprecated`**

#### Defined in

[lib/services/stream.service.ts:50](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L50)

___

### localAudioStreamStatusChanged

• **localAudioStreamStatusChanged**: `EventEmitter`<`boolean`\>

Emitted when the status of the local audio stream changed e.g. audio disabled or enabled.

#### Defined in

[lib/services/stream.service.ts:39](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L39)

___

### localShareScreenStream$

• **localShareScreenStream$**: `BehaviorSubject`<``null`` \| `MediaStream`\>

You can subscribe to screen share changes

#### Defined in

[lib/services/stream.service.ts:19](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L19)

___

### localStream$

• **localStream$**: `BehaviorSubject`<``null`` \| `MediaStream`\>

You can subscribe to localSteam changes

#### Defined in

[lib/services/stream.service.ts:15](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L15)

___

### localStreamStatusChanged

• **localStreamStatusChanged**: `EventEmitter`<`MediaStreamTrack` \| `MediaStream`\>

Emitted when the status of the local stream changed e.g. audio or video disabled or enabled.

#### Defined in

[lib/services/stream.service.ts:34](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L34)

___

### localVideoStreamStatusChanged

• **localVideoStreamStatusChanged**: `EventEmitter`<`boolean`\>

Emitted when the status of the local video stream changed e.g. video disabled or enabled.

#### Defined in

[lib/services/stream.service.ts:44](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L44)

___

### replaceTrack$

• **replaceTrack$**: `BehaviorSubject`<``null`` \| `MediaStreamTrack`\>

Emitted with new Track when `StreamService.replaceTrack` is called

#### Defined in

[lib/services/stream.service.ts:24](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L24)

## Methods

### disableLocalTrack

▸ **disableLocalTrack**(`type`): `Promise`<`MediaStream`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `type` | [`StreamType`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/enums/StreamType.md) |

#### Returns

`Promise`<`MediaStream`\>

#### Defined in

[lib/services/stream.service.ts:193](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L193)

___

### enableLocalTrack

▸ **enableLocalTrack**(`type`): `Promise`<`MediaStream`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `type` | [`StreamType`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/enums/StreamType.md) |

#### Returns

`Promise`<`MediaStream`\>

#### Defined in

[lib/services/stream.service.ts:147](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L147)

___

### getAudioTrackForStream

▸ **getAudioTrackForStream**(`stream?`): ``null`` \| `MediaStreamTrack`

get first/single audio track of the given stream

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `stream?` | `MediaStream` | stream with audio treack |

#### Returns

``null`` \| `MediaStreamTrack`

first audio track of stream

#### Defined in

[lib/services/stream.service.ts:418](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L418)

___

### getLocalStream

▸ **getLocalStream**(): ``null`` \| `MediaStream`

get current state value of local stream

#### Returns

``null`` \| `MediaStream`

current local stream

#### Defined in

[lib/services/stream.service.ts:305](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L305)

___

### getMediaDevices

▸ **getMediaDevices**(): `Promise`<`MediaDeviceInfo`[]\>

get media devices, Attention you need getMedia permissions for this call

**`deprecated`** use DeviceService.getMediaDevices() instead

#### Returns

`Promise`<`MediaDeviceInfo`[]\>

Promise that resolves to media Devices as array

#### Defined in

[lib/services/stream.service.ts:430](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L430)

___

### getScreenCapture

▸ **getScreenCapture**(): `Promise`<``null`` \| `MediaStream`\>

get screen or window as stream

#### Returns

`Promise`<``null`` \| `MediaStream`\>

MediaStram of desktop or display

#### Defined in

[lib/services/stream.service.ts:381](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L381)

___

### getVideoTrackForStream

▸ **getVideoTrackForStream**(`stream?`): ``null`` \| `MediaStreamTrack`

get first/single video track of the given stream

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `stream?` | `MediaStream` | stream with video treack |

#### Returns

``null`` \| `MediaStreamTrack`

first video track of stream

#### Defined in

[lib/services/stream.service.ts:406](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L406)

___

### muteLocalAudioStream

▸ **muteLocalAudioStream**(): `void`

mute local audio stream

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:330](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L330)

___

### muteLocalVideoStream

▸ **muteLocalVideoStream**(): `void`

mute local video stream

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:360](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L360)

___

### muteStream

▸ **muteStream**(`stream`, `type`): `void`

Mute stream in node.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `stream` | `MediaStreamTrack` \| `MediaStream` | stram or track |
| `type` | [`StreamType`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/enums/StreamType.md) | stream or track type |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:259](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L259)

___

### replaceTrack

▸ **replaceTrack**(`track`): `void`

set replace track service state. You can subscribe to `StreamService.replaceTrack$` to update the track somewhere.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `track` | `MediaStreamTrack` | new track |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:313](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L313)

___

### replaceTrackInStream

▸ **replaceTrackInStream**(`stream`, `track`): `void`

replace a track in stream

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `stream` | `MediaStream` | stream with thre track to replace |
| `track` | `MediaStreamTrack` | new track |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:277](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L277)

___

### setAudioOutput

▸ **setAudioOutput**(`deviceId`): `void`

set current audio device in service state. You can subscribe to `StreamService.audioOutput$` to get changes.

#### Parameters

| Name | Type |
| :------ | :------ |
| `deviceId` | `string` |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:438](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L438)

___

### setLocalStream

▸ **setLocalStream**(`stream`): `void`

set local stream in service state

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `stream` | ``null`` \| `MediaStream` | stream to set |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:297](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L297)

___

### setStreamInNode

▸ **setStreamInNode**(`node`, `stream`, `muted?`, `local?`): `void`

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `node` | `HTMLVideoElement` \| `HTMLAudioElement` | `undefined` | `HTMLVideoElement` or `HTMLAudioElement` that should play the stream. |
| `stream` | `MediaStreamTrack` \| `MediaStream` | `undefined` | stream to set in node |
| `muted` | `boolean` | `true` | mute audio |
| `local` | `boolean` | `false` | if set to `true` `localStreamStatusChanged` is emitted on play |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:87](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L87)

___

### stopStreamInNode

▸ **stopStreamInNode**(`node`): `void`

stop stream playing in node

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `node` | `ElementRef`<`any`\> | node with nativeElement type `HTMLVideoElement` or  `HTMLAudioElement` |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:121](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L121)

___

### toggleLocalTrack

▸ **toggleLocalTrack**(`type`): `Promise`<`MediaStream`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `type` | [`StreamType`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/enums/StreamType.md) |

#### Returns

`Promise`<`MediaStream`\>

#### Defined in

[lib/services/stream.service.ts:129](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L129)

___

### toggleMuteLocalAudioStream

▸ **toggleMuteLocalAudioStream**(): `void`

toggle mute audio of local stream

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:320](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L320)

___

### toggleMuteLocalVideoStream

▸ **toggleMuteLocalVideoStream**(): `void`

toggle mute local video stream

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:350](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L350)

___

### toggleMuteStream

▸ **toggleMuteStream**(`stream`, `type`, `value?`): `void`

set stream or track mute state or toggle mute

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `stream` | `MediaStreamTrack` \| `MediaStream` | stream or track |
| `type` | [`StreamType`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/enums/StreamType.md) | stream or track type |
| `value?` | `boolean` | enforce `true` or `false` |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:226](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L226)

___

### tryGetUserMedia

▸ **tryGetUserMedia**(`mediaConstraints?`): `Promise`<`MediaStream`\>

An simple wrapper for `navigator.mediaDevices.getUserMedia`, with basis error handling.

**`todo`** refactor

**`deprecated`** use DeviceService.tryGetUserMedia() instead

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `mediaConstraints?` | `MediaStreamConstraints` | a MediaStreamConstraints e.g. with specific deviceId, resolution or just audio. Default is:                          ```json                         {                             audio: true,                             video: true                         }                         ``` |

#### Returns

`Promise`<`MediaStream`\>

Promise that resilve to a stream matching the constraint

#### Defined in

[lib/services/stream.service.ts:456](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L456)

___

### unmuteLocalAudioStream

▸ **unmuteLocalAudioStream**(): `void`

unmute local audio stream

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:340](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L340)

___

### unmuteLocalVideoStream

▸ **unmuteLocalVideoStream**(): `void`

unmute local video stream

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:370](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L370)

___

### unmuteStream

▸ **unmuteStream**(`stream`, `type`): `void`

Unmute stream in node.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `stream` | `MediaStreamTrack` \| `MediaStream` | stram or track |
| `type` | [`StreamType`](https://github.com/lotterfriends/ngx-webrtc/tree/main/libs/ngx-webrtc/docs/enums/StreamType.md) | stream or track type |

#### Returns

`void`

#### Defined in

[lib/services/stream.service.ts:268](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L268)

___

### getAspectRatio

▸ `Static` **getAspectRatio**(`width`, `height`): `string`

Get aspect ratio for given width and height.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `width` | `number` | width in pixel |
| `height` | `number` | height in pixel |

#### Returns

`string`

aspect ratio for the given width and height

#### Defined in

[lib/services/stream.service.ts:70](https://github.com/lotterfriends/video-chat/blob/1e50ece/libs/ngx-webrtc/src/lib/services/stream.service.ts#L70)
